# ðŸ™ï¸ Rank1 City Web System - Project Summary

**Rank1 City Website** à¸„à¸·à¸­à¹€à¸§à¹‡à¸šà¹à¸­à¸›à¸žà¸¥à¸´à¹€à¸„à¸Šà¸±à¸™à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œ FiveM Roleplay "Rank1 City" à¸—à¸µà¹ˆà¸—à¸³à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸¨à¸¹à¸™à¸¢à¹Œà¸à¸¥à¸²à¸‡à¹ƒà¸™à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸² (Pre-registration), à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™, à¹à¸¥à¸°à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸±à¸šà¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¹€à¸à¸¡à¹‚à¸”à¸¢à¸•à¸£à¸‡

---

## ðŸ› ï¸ Technology Stack

### **Frontend & Core**
- **Framework:** [Next.js 14](https://nextjs.org/) (App Router) - React Framework à¸—à¸µà¹ˆà¹€à¸™à¹‰à¸™ Performance à¹à¸¥à¸° SEO
- **Styling:** [Tailwind CSS](https://tailwindcss.com/) - Utility-first CSS framework
- **UI Components:** [Shadcn UI](https://ui.shadcn.com/) - Reusable components built with Radix UI
- **Animations:** [Framer Motion](https://www.framer.com/motion/) - Library à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸³ Animation à¸—à¸µà¹ˆà¸¥à¸·à¹ˆà¸™à¹„à¸«à¸¥

### **Backend & Database**
- **Database:** MySQL (à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¹ˆà¸§à¸¡à¸à¸±à¸š FiveM Server)
- **ORM/Query Builder:** `mysql2` (Direct SQL Queries with Connection Pooling)
- **Authentication:** [NextAuth.js](https://next-auth.js.org/) (Discord Provider)

### **Infrastructure & Tools**
- **Hosting:** Vercel (Recommended) / Node.js Server
- **Version Control:** Git
- **Notification:** Discord Webhooks

---

## ðŸŒŸ Key Features (à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸)

### 1. ðŸ” Authentication (à¸£à¸°à¸šà¸šà¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™)
- **Discord Login:** à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸”à¹‰à¸§à¸¢à¸šà¸±à¸à¸Šà¸µ Discord à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
- **Role Sync:** à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Role à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸™ Discord Server (à¹€à¸Šà¹ˆà¸™ Admin, Whitelist)
- **Session Management:** à¸ˆà¸±à¸”à¸à¸²à¸£ Session à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸”à¹‰à¸§à¸¢ NextAuth à¸­à¸¢à¹ˆà¸²à¸‡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢

### 2. ðŸ“ Pre-registration (à¸£à¸°à¸šà¸šà¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸²)
- **Character Creation:** à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸¥à¸°à¸„à¸£ (à¸Šà¸·à¹ˆà¸­, à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥, à¸§à¸±à¸™à¹€à¸à¸´à¸”, à¸ªà¹ˆà¸§à¸™à¸ªà¸¹à¸‡)
- **SSN Generation:** à¸£à¸°à¸šà¸šà¸ªà¸¸à¹ˆà¸¡à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ (SSN) à¹à¸šà¸šà¹„à¸¡à¹ˆà¸‹à¹‰à¸³à¸à¸±à¸™ (Unique) à¸žà¸£à¹‰à¸­à¸¡à¸£à¸°à¸šà¸š Retry à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¸«à¸²à¸à¹€à¸à¸´à¸”à¸à¸²à¸£à¸Šà¸™à¸à¸±à¸™
- **Data Validation:** à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (à¹€à¸Šà¹ˆà¸™ à¸Šà¸·à¹ˆà¸­à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸ à¸²à¸©à¸²à¸­à¸±à¸‡à¸à¸¤à¸©, à¸ªà¹ˆà¸§à¸™à¸ªà¸¹à¸‡à¸•à¸²à¸¡à¹€à¸à¸“à¸‘à¹Œ)
- **Milestone Rewards:** à¹à¸ªà¸”à¸‡à¹à¸–à¸šà¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²à¸¢à¸­à¸”à¸œà¸¹à¹‰à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸£à¸§à¸¡ à¹à¸¥à¸°à¸‚à¸­à¸‡à¸£à¸²à¸‡à¸§à¸±à¸¥à¸—à¸µà¹ˆà¸ˆà¸°à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„

### 3. ðŸŽ° Lucky Draw (à¸£à¸°à¸šà¸šà¸à¸²à¸Šà¸²à¸›à¸­à¸‡)
- **Ticket System:** à¹ƒà¸Šà¹‰ "à¸•à¸±à¹‹à¸§" à¹ƒà¸™à¸à¸²à¸£à¸«à¸¡à¸¸à¸™ (à¹„à¸”à¹‰à¸ˆà¸²à¸à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ à¸«à¸£à¸·à¸­ à¹€à¸Šà¹‡à¸„à¸­à¸´à¸™)
- **RNG Engine:** à¸£à¸°à¸šà¸šà¸ªà¸¸à¹ˆà¸¡à¸‚à¸­à¸‡à¸£à¸²à¸‡à¸§à¸±à¸¥à¸à¸±à¹ˆà¸‡ Server-side (à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸à¸²à¸£à¹‚à¸à¸‡)
- **Transaction Safety:** à¹ƒà¸Šà¹‰ Database Transaction (`START TRANSACTION`, `COMMIT`, `ROLLBACK`) à¹à¸¥à¸° `FOR UPDATE` lock à¹€à¸žà¸·à¹ˆà¸­à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ Race Condition (à¸›à¸±à¹Šà¸¡à¸‚à¸­à¸‡)
- **Rate Limiting:** à¸ˆà¸³à¸à¸±à¸”à¸à¸²à¸£à¸à¸”à¸ªà¸¸à¹ˆà¸¡à¸•à¹ˆà¸­à¸™à¸²à¸—à¸µ (User-based) à¹€à¸žà¸·à¹ˆà¸­à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ Spam
- **History:** à¸šà¸±à¸™à¸—à¸¶à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸ªà¸¸à¹ˆà¸¡à¹à¸¥à¸°à¹à¸ªà¸”à¸‡à¸œà¸¥à¸¢à¹‰à¸­à¸™à¸«à¸¥à¸±à¸‡

### 4. ðŸ“… Daily Check-in (à¸£à¸°à¸šà¸šà¹€à¸Šà¹‡à¸„à¸­à¸´à¸™à¸£à¸²à¸¢à¸§à¸±à¸™)
- **Streak System:** à¹€à¸Šà¹‡à¸„à¸­à¸´à¸™à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸£à¸±à¸šà¸‚à¸­à¸‡à¸£à¸²à¸‡à¸§à¸±à¸¥à¸—à¸µà¹ˆà¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™
- **Cooldown:** à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¹€à¸Šà¹‡à¸„à¸­à¸´à¸™à¸§à¸±à¸™à¸¥à¸° 1 à¸„à¸£à¸±à¹‰à¸‡ (à¸£à¸µà¹€à¸‹à¹‡à¸•à¹€à¸—à¸µà¹ˆà¸¢à¸‡à¸„à¸·à¸™)
- **Rewards:** à¹à¸ˆà¸à¸•à¸±à¹‹à¸§à¸à¸²à¸Šà¸² à¸«à¸£à¸·à¸­ à¹„à¸­à¹€à¸—à¸¡à¹ƒà¸™à¹€à¸à¸¡

### 5. âš”ï¸ Gang System (à¸£à¸°à¸šà¸šà¹à¸à¹Šà¸‡)
- **Create/Join:** à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸£à¹‰à¸²à¸‡à¹à¸à¹Šà¸‡à¸«à¸£à¸·à¸­à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¹à¸à¹Šà¸‡à¹„à¸”à¹‰
- **Invite Link:** à¸£à¸°à¸šà¸šà¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œà¹€à¸Šà¸´à¸à¹€à¸žà¸·à¹ˆà¸­à¸™à¹€à¸‚à¹‰à¸²à¹à¸à¹Šà¸‡
- **Dashboard:** à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸à¹Šà¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸”à¸¹à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸ªà¸¡à¸²à¸Šà¸´à¸à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¹à¸à¹Šà¸‡à¹„à¸”à¹‰
- **Gang Rewards:** à¸‚à¸­à¸‡à¸£à¸²à¸‡à¸§à¸±à¸¥à¸žà¸´à¹€à¸¨à¸©à¹€à¸¡à¸·à¹ˆà¸­à¹à¸à¹Šà¸‡à¸¡à¸µà¸ªà¸¡à¸²à¸Šà¸´à¸à¸„à¸£à¸šà¸•à¸²à¸¡à¸à¸³à¸«à¸™à¸”

### 6. ðŸ“° News & Updates (à¸£à¸°à¸šà¸šà¸‚à¹ˆà¸²à¸§à¸ªà¸²à¸£)
- **Categories:** à¹à¸šà¹ˆà¸‡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸‚à¹ˆà¸²à¸§ (à¸à¸´à¸ˆà¸à¸£à¸£à¸¡, à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™, à¸›à¸£à¸°à¸à¸²à¸¨)
- **Search & Filter:** à¸„à¹‰à¸™à¸«à¸²à¸‚à¹ˆà¸²à¸§à¹à¸¥à¸°à¸à¸£à¸­à¸‡à¸•à¸²à¸¡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
- **Optimized Images:** à¹ƒà¸Šà¹‰ `next/image` à¹€à¸žà¸·à¹ˆà¸­à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¸ à¸²à¸žà¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸§à¸”à¹€à¸£à¹‡à¸§à¹à¸¥à¸°à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ Layout Shift

### 7. ðŸ›¡ï¸ Admin Dashboard (à¸£à¸°à¸šà¸šà¸«à¸¥à¸±à¸‡à¸šà¹‰à¸²à¸™)
- **Overview Stats:** à¸”à¸¹à¸ªà¸–à¸´à¸•à¸´à¸£à¸§à¸¡ (à¸¢à¸­à¸”à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™, à¸ˆà¸³à¸™à¸§à¸™à¹à¸à¹Šà¸‡, à¸¢à¸­à¸”à¸ªà¸¸à¹ˆà¸¡à¸à¸²à¸Šà¸²)
- **User Management:** à¸„à¹‰à¸™à¸«à¸²à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸”à¹‰à¸§à¸¢ Discord ID à¸«à¸£à¸·à¸­ Referral Code
- **Recent Activity:** à¸”à¸¹à¸£à¸²à¸¢à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸¥à¹ˆà¸²à¸ªà¸¸à¸”à¹à¸¥à¸°à¸œà¸¹à¹‰à¹‚à¸Šà¸„à¸”à¸µà¸£à¸²à¸‡à¸§à¸±à¸¥à¹ƒà¸«à¸à¹ˆ
- **System Config:** à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸ªà¸–à¸²à¸™à¸°à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œ (Live/Maintenance) à¹à¸¥à¸°à¹€à¸›à¸´à¸”-à¸›à¸´à¸”à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸•à¹ˆà¸²à¸‡à¹† à¹„à¸”à¹‰à¹à¸šà¸š Real-time

---

## âš™ï¸ System Architecture & Security

### **Database Schema**
- **`users`:** à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸¥à¸°à¸„à¸£à¹ƒà¸™à¹€à¸à¸¡ (à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸š ESX Legacy)
- **`preregistrations`:** à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹€à¸§à¹‡à¸š, à¸•à¸±à¹‹à¸§, à¹à¸•à¹‰à¸¡
- **`gangs`:** à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸à¹Šà¸‡à¹à¸¥à¸°à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸à¹Šà¸‡
- **`lucky_draw_history`:** à¹€à¸à¹‡à¸šà¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸ªà¸¸à¹ˆà¸¡à¸à¸²à¸Šà¸²
- **`claim_queue`:** (New) à¸•à¸²à¸£à¸²à¸‡à¸„à¸´à¸§à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸­à¸£à¸±à¸šà¸‚à¸­à¸‡à¸£à¸²à¸‡à¸§à¸±à¸¥à¹€à¸‚à¹‰à¸²à¸•à¸±à¸§à¸¥à¸°à¸„à¸£à¹ƒà¸™à¹€à¸à¸¡

### **Security Measures**
- **Rate Limiting:** à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ Brute Force à¹à¸¥à¸° Spam Request (à¸£à¸°à¸”à¸±à¸š User ID)
- **Input Sanitization:** à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ SQL Injection à¹à¸¥à¸° XSS
- **Server-side Validation:** à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¸à¸±à¹ˆà¸‡ Server à¹€à¸ªà¸¡à¸­
- **Optimistic Locking:** à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸Šà¸™à¸à¸±à¸™à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸à¸²à¸£à¹€à¸‚à¸µà¸¢à¸™à¸žà¸£à¹‰à¸­à¸¡à¸à¸±à¸™à¸«à¸¥à¸²à¸¢à¸„à¸™

### **Performance Optimization**
- **Connection Pooling:** à¸ˆà¸±à¸”à¸à¸²à¸£ Database Connection à¸­à¸¢à¹ˆà¸²à¸‡à¸¡à¸µà¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸ž (Web: 100, Game: 20)
- **Lazy Loading:** à¹‚à¸«à¸¥à¸” Component à¸«à¸™à¸±à¸à¹† à¹€à¸¡à¸·à¹ˆà¸­à¸ˆà¸³à¹€à¸›à¹‡à¸™à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ (Dynamic Import)
- **Image Optimization:** à¹ƒà¸Šà¹‰ WebP format à¹à¸¥à¸°à¸à¸³à¸«à¸™à¸” sizes à¹€à¸žà¸·à¹ˆà¸­à¸¥à¸” bandwidth
- **Static Generation:** à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸šà¸ªà¹ˆà¸§à¸™à¹ƒà¸«à¸à¹ˆà¹€à¸›à¹‡à¸™ Server Component à¹€à¸žà¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¸ªà¸¹à¸‡à¸ªà¸¸à¸”

---

## ðŸŽ® Game Integration Flow

1. **Web:** à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ -> à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡ `users` à¹à¸¥à¸° `preregistrations`
2. **Web:** à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™à¸ªà¸¸à¹ˆà¸¡à¸à¸²à¸Šà¸² -> à¸•à¸±à¸”à¸•à¸±à¹‹à¸§ -> à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¸­à¸‡à¸£à¸²à¸‡à¸§à¸±à¸¥à¸¥à¸‡ `claim_queue`
3. **Game Server:** à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™à¹€à¸‚à¹‰à¸²à¹€à¸à¸¡ -> Script à¹ƒà¸™à¹€à¸à¸¡à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š `users` -> à¹‚à¸«à¸¥à¸”à¸•à¸±à¸§à¸¥à¸°à¸„à¸£
4. **Game Server:** à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™à¸žà¸´à¸¡à¸žà¹Œà¸„à¸³à¸ªà¸±à¹ˆà¸‡ `/claim` -> Script à¸­à¹ˆà¸²à¸™ `claim_queue` -> à¹€à¸ªà¸à¸‚à¸­à¸‡à¹€à¸‚à¹‰à¸²à¸•à¸±à¸§ -> à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸°à¹€à¸›à¹‡à¸™ `claimed`

---
*Generated by Rank1 City AI Assistant*
